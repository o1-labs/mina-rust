---
sidebar_position: 8
title: Node Management
description: Essential commands and tools for managing your Mina Rust node
---

import CodeBlock from "@theme/CodeBlock";
import BuildInfoDocker from "!!raw-loader!./scripts/build-info-docker.sh";
import BuildInfoDockerVersion from "!!raw-loader!./scripts/build-info-docker-version.sh";
import BuildInfoNative from "!!raw-loader!./scripts/build-info-native.sh";
import BuildInfoNativePath from "!!raw-loader!./scripts/build-info-native-path.sh";
import VerifyBuildInfoDocker from "!!raw-loader!./scripts/verify-build-info-docker.sh";
import VerifyBuildInfoNative from "!!raw-loader!./scripts/verify-build-info-native.sh";
import BuildInfoExample from "!!raw-loader!./example-output/build-info-example.txt";
import BackupConfiguration from "!!raw-loader!./scripts/backup-configuration.sh";
import ManageFilePermissions from "!!raw-loader!./scripts/manage-file-permissions.sh";
import CheckSystemResources from "!!raw-loader!./scripts/check-system-resources.sh";
import CreateEmptyEnv from "!!raw-loader!./scripts/create-empty-env.sh";
import CreateEnvCustom from "!!raw-loader!./scripts/create-env-custom.sh";
import CreateEnvArchive from "!!raw-loader!./scripts/create-env-archive.sh";

# Node Management

This guide covers essential commands and tools for managing your Mina Rust node,
including version verification, monitoring, and troubleshooting.

## Checking Build Information

It's important to verify the version and build information of your node to
ensure you're running the correct version and to help with troubleshooting.

### Using Docker

To check the build information of your Docker-based node:

<CodeBlock language="bash" title="scripts/build-info-docker.sh">
  {BuildInfoDocker}
</CodeBlock>

Example output:

<CodeBlock language="text" title="example-output/build-info-example.txt">
  {BuildInfoExample}
</CodeBlock>

For a specific version:

<CodeBlock language="bash" title="scripts/build-info-docker-version.sh">
  {BuildInfoDockerVersion}
</CodeBlock>

### Using Native Binary

If you've built from source or are running the binary directly:

<CodeBlock language="bash" title="scripts/build-info-native.sh">
  {BuildInfoNative}
</CodeBlock>

Or with the full path if not in PATH:

<CodeBlock language="bash" title="scripts/build-info-native-path.sh">
  {BuildInfoNativePath}
</CodeBlock>

### Understanding Build Information

The build info provides critical details:

- **Version**: Short commit hash identifying the exact code version
- **Build time**: When the binary was compiled
- **Commit SHA**: Full Git commit hash for precise version tracking
- **Commit time**: When the source code commit was made
- **Commit branch**: The Git branch used for the build
- **Rustc channel**: Rust compiler channel (stable/beta/nightly)
- **Rustc version**: Exact Rust compiler version used

### Verifying Your Installation

Always verify your node version after installation or updates:

For Docker users:

<CodeBlock language="bash" title="scripts/verify-build-info-docker.sh">
  {VerifyBuildInfoDocker}
</CodeBlock>

For native binary users:

<CodeBlock language="bash" title="scripts/verify-build-info-native.sh">
  {VerifyBuildInfoNative}
</CodeBlock>

## Monitoring Your Node

### View Logs

For Docker Compose setups:

```bash
# View all logs
docker compose logs -f

# View only node logs
docker compose logs -f mina-rust-node

# View last 100 lines
docker compose logs --tail=100 mina-rust-node
```

For Docker containers:

```bash
# View container logs
docker logs -f mina-rust-node

# View with timestamps
docker logs -f -t mina-rust-node
```

### Check Node Status

```bash
# Check if containers are running
docker compose ps

# Or for individual containers
docker ps | grep mina
```

### Resource Usage

Monitor CPU and memory usage:

```bash
# Docker stats
docker stats mina-rust-node

# System resources
htop
# or
top
```

## Common Management Tasks

### Restart Your Node

```bash
# Using Docker Compose
docker compose restart

# Or stop and start
docker compose down
docker compose up -d
```

### Update Your Node

```bash
# Pull latest images
docker compose pull

# Restart with new images
docker compose up -d --force-recreate
```

### Backup Configuration

Always backup your keys and configuration:

<CodeBlock language="bash" title="scripts/backup-configuration.sh">
  {BackupConfiguration}
</CodeBlock>

### Managing File Permissions

Docker containers often run as root, creating files owned by root on your host:

<CodeBlock language="bash" title="scripts/manage-file-permissions.sh">
  {ManageFilePermissions}
</CodeBlock>

<!-- prettier-ignore-start -->

:::tip Best Practice

Always fix file ownership after Docker operations to ensure your local user can
properly access, backup, and manage the files. This is especially important for
sensitive files like producer keys.

:::

<!-- prettier-ignore-stop -->

## Troubleshooting

### Node Won't Start

1. Check build info to verify correct version
2. Review logs for errors:
   ```bash
   docker compose logs --tail=100
   ```
3. Verify ports are available:
   ```bash
   netstat -tuln | grep -E "8302|3000|8070"
   ```

### Missing .env File Error

If you see an error like "env file .env not found", Docker Compose needs
environment variables:

**For regular node and block producer:**

Quick fix: Create an empty .env file (has defaults)

<CodeBlock language="bash" title="scripts/create-empty-env.sh">
  {CreateEmptyEnv}
</CodeBlock>

Or create with custom settings:

<CodeBlock language="bash" title="scripts/create-env-custom.sh">
  {CreateEnvCustom}
</CodeBlock>

**For archive node (required):**

<CodeBlock language="bash" title="scripts/create-env-archive.sh">
  {CreateEnvArchive}
</CodeBlock>

Regular node docker-compose files have default values, but the archive node
docker-compose file requires the `.env` file with PostgreSQL configuration.

### Connection Issues

1. Verify external IP configuration
2. Check firewall rules
3. Test connectivity:
   ```bash
   telnet <external-ip> 8302
   ```

### Performance Issues

1. Check system resources:

   <CodeBlock language="bash" title="scripts/check-system-resources.sh">
     {CheckSystemResources}
   </CodeBlock>

2. Review node logs for warnings
3. Consider adjusting Docker resource limits

## Best Practices

1. **Regular Version Checks**: Always verify your node version after updates
2. **Log Monitoring**: Set up log rotation and monitoring
3. **Backup Strategy**: Regular backups of keys and configuration
4. **Update Schedule**: Plan updates during low-activity periods
5. **Version Documentation**: Keep track of which versions you're running

## Next Steps

- [Network Configuration](network-configuration) - Configure network settings
- [Block Producer](block-producer) - Set up block production
- [Archive Node](archive-node) - Run an archive node
